

* We will work on several components

  - the data structure: how do we store the 3D arrays

        * we need to anticipate the halo fill

        * anticipate that we want to distinguish covariant and
          contravariant components, even though the distinction is
          trivial in Cartesian coordinates.

  - computation of the model r.h.s.
        * our guidelines are:
          data contiguity + maximize computational intensity

### MR: what does "maximize computational intensity" mean?

  - multigrid

  - parallelization

        * write things to be as general as possible:
          subdomain partition can be anything (but power of 2)

### MR: this is unclear! "anything but" means "anything apart from";
        I think it should say "anything, but it must be a power of 2";
        please clarify.

        * halo fill: it should be flexible: fill only two faces,
          fill the 6 faces, fill the 6 faces and the 8 corners etc.

        * gather arrays and matrix A [for the multigrid]

* for each subroutine we should systematically

  - write the docstring

  - write one or several tests:

        * of the subroutine itself

        * of its interaction with other parts of the software


* At this stage of the development, don't be afraid to rewrite things
  completely => e.g. the data structure is central and impacts a lot
  the way the rest of the code is written


* More important things to address:

  - n/a


* Questions and minor things to address:


  - MR: file core/timescheme.py: write the for-loops on prognostic
    variables in a nicer way.

  - MR: file core/tracer.py: maybe one can optimize the loop on traclist
    so that it does not need to use getattr().

  - MR: file core/mpi/halo.py: lines 157, 237 ("fill" of Halo_outerdim
    and Halo): when an exception is raised, I think always 9999 will be
    printed -> to be checked.

  - MR: file core/defaults.json, line 19 ("doc" of "expname") contains
    the statement "the history (2D snapshots)".  Should it be 3D?

  - MR: file core/defaults.json, line 41 ("doc" of "order") says that
    centered fluxes require diffusion.  Is that correct or a leftover
    from fluid2d?

  - MR: file core/defaults.json, line 129 ("geometry") should probably
    be removed or maybe adopted (remove disc, add zperiodic?).

  - MR: file core/defaults.json, line 141 ("isisland") should probably
    be removed or adopted, since there is no streamfunction anymore.

  - MR: file core/defaults.json, line 167 ("plotting_options") has to
    be adopted.

  - MR: file core/defaults.json, line 234 ("expdir"): are "expdir" and
    "datadir" both needed?

  - MR: file core/defaults.json, lines 276, 301, 306 ("hydroepsilon",
    "ageostrophic", "bottom_torque") have probably no use in a 3D model
    and should be removed.


